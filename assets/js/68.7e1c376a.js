(window.webpackJsonp=window.webpackJsonp||[]).push([[68],{424:function(t,e,s){"use strict";s.r(e);var a=s(42),r=Object(a.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"start"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#start"}},[t._v("#")]),t._v(" start")]),t._v(" "),s("p",[t._v("查看网卡类型")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("lspci "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("grep")]),t._v(" Ethernet\n")])])]),s("h2",{attrs:{id:"dns"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dns"}},[t._v("#")]),t._v(" dns")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://kb.adguard.com/en/general/dns-providers",target:"_blank",rel:"noopener noreferrer"}},[t._v("Known DNS Providers"),s("OutboundLink")],1)])]),t._v(" "),s("h3",{attrs:{id:"dns-tcp"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dns-tcp"}},[t._v("#")]),t._v(" dns tcp")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("vi")]),t._v(" /etc/resolv.conf\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#添加 DNS over TCP")]),t._v("\noptions use-vc\nnameserver "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8.8")]),t._v(".8.8\nnameserver "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8.8")]),t._v(".4.4\n")])])]),s("h3",{attrs:{id:"dns-over-tls"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dns-over-tls"}},[t._v("#")]),t._v(" dns over tls")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" getdns-utils\n")])])]),s("p",[t._v("getdns_query 使用 -L 参数指定通过 TLS 进行查询，TLS 查询缺省连接 853 端口；使用 -m 参数表示校验证书和请求域名匹配；使用 -s 参数表示采用 stub 解析模式，而非缺省的递归查询")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("$ getdns_query @115.159.131.230~dns.rubyfish.cn -m -s -L -A www.google.com\n$ getdns_query @47.96.179.163~dns.rubyfish.cn -m -s -L -A www.google.com\n")])])]),s("h3",{attrs:{id:"dns-over-https"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dns-over-https"}},[t._v("#")]),t._v(" dns over https")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://github.com/curl/curl/wiki/DNS-over-HTTPS",target:"_blank",rel:"noopener noreferrer"}},[t._v("DNS-over-HTTPS"),s("OutboundLink")],1)])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# https://dns.google.com/resolve?name=bnxb.com&type=a")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# https://1.1.1.1/dns-query?ct=application/dns-json&name=bnxb.com&type=A")]),t._v("\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" -H "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'accept: application/dns-json'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://rubyfish.cn/dns-query?name=www.google.com&type=A'")]),t._v("\n")])])]),s("p",[t._v("上述这种简单的 json 响应只是 "),s("a",{attrs:{href:"https://developers.google.com/speed/public-dns/docs/doh/json",target:"_blank",rel:"noopener noreferrer"}},[t._v("Google/Mozilla 的实现方案"),s("OutboundLink")],1),t._v("。")]),t._v(" "),s("p",[t._v("IETF 提出的"),s("a",{attrs:{href:"https://tools.ietf.org/html/rfc8484",target:"_blank",rel:"noopener noreferrer"}},[t._v("标准化方案"),s("OutboundLink")],1),t._v("要比 web 原生的 json 格式更复杂一些，在 HTTP 流中包装了 DNS 原始的消息。Facebook 的工程师提供了一个基于 Python3.5+ 的工具 doh-proxy，通过 pip 安装的方法")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" python3-pip python3-setuptools python3-wheel\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" -H pip3 "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" doh-proxy\n")])])]),s("p",[t._v("安装后使用 doh-client 命令进行查询，--domain 参数指定 DoH 服务器，--qname 指定查询的域名")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("$ doh-client --domain dns.rubyfish.cn --qname www.facebook.com --qtype A\n")])])]),s("h2",{attrs:{id:"network-test"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#network-test"}},[t._v("#")]),t._v(" network test")]),t._v(" "),s("h3",{attrs:{id:"speed-test"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#speed-test"}},[t._v("#")]),t._v(" speed test")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" -fsSLo speedtest-cli https://raw.githubusercontent.com/sivel/speedtest-cli/master/speedtest.py\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("chmod")]),t._v(" +x speedtest-cli\n")])])]),s("h3",{attrs:{id:"web-speed-test"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#web-speed-test"}},[t._v("#")]),t._v(" web speed test")]),t._v(" "),s("div",{staticClass:"language-http extra-class"},[s("pre",{pre:!0,attrs:{class:"language-http"}},[s("code",[s("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("http:")]),t._v("//mybroadbandspeed.speedtestcustom.com/\n"),s("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("http:")]),t._v("//aaaaaa.speedtestcustom.com/\n"),s("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("http:")]),t._v("//rixcloud.speedtestcustom.com/\n"),s("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("http:")]),t._v("//cordcloud.speedtestcustom.com/\n")])])]),s("h3",{attrs:{id:"ip-address"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ip-address"}},[t._v("#")]),t._v(" ip address")]),t._v(" "),s("div",{staticClass:"language-http extra-class"},[s("pre",{pre:!0,attrs:{class:"language-http"}},[s("code",[s("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("http:")]),t._v("//ip100.info/\n"),s("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("http:")]),t._v("//ip111.cn/\n"),s("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("https:")]),t._v("//ip.skk.moe/\n")])])]),s("h3",{attrs:{id:"generate-204"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#generate-204"}},[t._v("#")]),t._v(" generate_204")]),t._v(" "),s("div",{staticClass:"language-http extra-class"},[s("pre",{pre:!0,attrs:{class:"language-http"}},[s("code",[s("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("http:")]),t._v("//204.ustclug.org\n"),s("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("http:")]),t._v("//connect.rom.miui.com/generate_204\n"),s("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("http:")]),t._v("//connectivitycheck.platform.hicloud.com/generate_204\n"),s("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("http:")]),t._v("//wifi.vivo.com.cn/generate_204\n"),s("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("http:")]),t._v("//www.gstatic.com/generate_204\n"),s("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("http:")]),t._v("//www.g.cn/generate_204\n"),s("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("http:")]),t._v("//www.msftconnecttest.com/connecttest.txt\n"),s("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("http:")]),t._v("//captive.apple.com\n"),s("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("http:")]),t._v("//detectportal.firefox.com/success.txt\n")])])])])}),[],!1,null,null,null);e.default=r.exports}}]);