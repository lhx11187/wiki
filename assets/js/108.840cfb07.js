(window.webpackJsonp=window.webpackJsonp||[]).push([[108],{465:function(s,t,a){"use strict";a.r(t);var e=a(42),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"pve"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pve"}},[s._v("#")]),s._v(" pve")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://bbs.hassbian.com/thread-6276-1-1.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("基于PVE虚拟化的AIO家庭多功能服务器"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://www.10bests.com/win10-htpc-on-pve/",target:"_blank",rel:"noopener noreferrer"}},[s._v("PVE直通核显搭建虚拟Win10 HTPC避坑指南"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://koolshare.cn/thread-184466-1-1.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("PVE安装及Win10核显直通HDMI无输出"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://blogs.gorquan.cn/2020/07/28/yuque/PVE%E4%B8%8B%E7%9B%B4%E9%80%9A%E6%A0%B8%E6%98%BE%E8%B8%A9%E5%9D%91%E6%80%BB%E7%BB%93/",target:"_blank",rel:"noopener noreferrer"}},[s._v("PVE下直通核显踩坑总结"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://koolshare.cn/thread-158939-1-1.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("PVE的安装，中文手册及GPU独显核显直通、万兆内网的那些事"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://koolshare.cn/thread-167738-1-1.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("PVE核显直通LibreElec开启HDMI-4K-HTPC，实现All in one"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://koolshare.cn/thread-181979-1-1.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("关于双网卡PVE：openwrt(LEDE) + win10直通核显+ DSM918+ 实现HDMI与声卡直通HTPC的解决方案"),a("OutboundLink")],1)])]),s._v(" "),a("p",[s._v("使用 "),a("code",[s._v("DiskGenius")]),s._v(" 删除U盘所有分区")]),s._v(" "),a("p",[s._v("使用 "),a("code",[s._v("UltraISO")]),s._v(" 打开PVE镜像，启动写入硬盘映像 (写入方式 "),a("code",[s._v("RAW")]),s._v(" )")]),s._v(" "),a("h2",{attrs:{id:"mirror"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mirror"}},[s._v("#")]),s._v(" mirror")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Debian")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" -i "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s/ftp.debian.org/mirror.sjtu.edu.cn/g'")]),s._v(" /etc/apt/sources.list\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" -i "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s/security.debian.org/mirror.sjtu.edu.cn\\/debian-security/g'")]),s._v(" /etc/apt/sources.list\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# PVE")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 6.x 版本")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -f /etc/apt/sources.list.d/pve-enterprise.list\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"deb https://mirrors.tuna.tsinghua.edu.cn/proxmox/debian buster pve-no-subscription"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /etc/apt/sources.list.d/pve-no-subscription.list\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# LXC")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查找设定下载源的文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" -rn "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"download.proxmox.com"')]),s._v(" /usr/share/perl5/PVE/*\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" -i.bak "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"s#http://download.proxmox.com/images#https://mirrors.ustc.edu.cn/proxmox/images#g"')]),s._v(" /usr/share/perl5/PVE/APLInfo.pm\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" -O /var/lib/pve-manager/apl-info/mirrors.ustc.edu.cn https://mirrors.ustc.edu.cn/proxmox/images/aplinfo.dat\n")])])]),a("h2",{attrs:{id:"qemu-guest-agent"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#qemu-guest-agent"}},[s._v("#")]),s._v(" qemu-guest-agent")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://qkxu.github.io/2019/03/24/Qemu-Guest-Agent-(QGA)%E5%8E%9F%E7%90%86%E7%AE%80%E4%BB%8B.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("Qemu-Guest-Agent-(QGA)原理简介"),a("OutboundLink")],1)])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("opkg update\nopkg "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" qemu-ga\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("reboot")]),s._v("\n")])])]),a("h2",{attrs:{id:"硬件直通"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#硬件直通"}},[s._v("#")]),s._v(" 硬件直通")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动内核IOMMU支持")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/default/grub\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("GRUB_CMDLINE_LINUX_DEFAULT")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"quiet intel_iommu=on pcie_acs_override=downstream iommu=pt video=efifb:off,vesafb:off"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("GRUB_CMDLINE_LINUX_DEFAULT")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"quiet amd_iommu=on iommu=pt video=efifb:off,vesafb:off"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("update-grub")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 加载硬件直通相关模块")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/modules\nvfio\nvfio_iommu_type1\nvfio_pci\nvfio_virqfd\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 添加驱动黑名单")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/modprobe.d/blacklist.conf\nblacklist snd_hda_intel\nblacklist snd_soc_skl\nblacklist snd_hda_codec_hdmi\nblacklist i915\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 或者")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"blacklist snd_hda_intel"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" /etc/modprobe.d/pve-blacklist.conf\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"blacklist snd_hda_codec_hdmi"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" /etc/modprobe.d/pve-blacklist.conf\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"blacklist i915"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" /etc/modprobe.d/pve-blacklist.conf\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# N卡和A卡的驱动黑名单")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"blacklist nouveau"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" /etc/modprobe.d/blacklist.conf\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"blacklist radeon"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" /etc/modprobe.d/blacklist.conf\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果是N卡还需要加入下面的配置到 kvm.conf")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"options kvm ignore_msrs=1"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" /etc/modprobe.d/kvm.conf\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 绑定核显声卡到vfio模块")]),s._v("\nlspci -n "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" -E "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0300|0403"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"\noptions vfio-pci ids=8086:0412,8086:0c0c"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /etc/modprobe.d/vfio.conf\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 更新配置信息并重启PVE主机")]),s._v("\nupdate-initramfs -u\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("reboot")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 检查模块是否正常加载")]),s._v("\nlsmod "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" vfio\nvfio_pci               "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("49152")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nvfio_virqfd            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16384")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" vfio_pci\nirqbypass              "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16384")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" vfio_pci,kvm\nvfio_iommu_type1       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("28672")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nvfio                   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("32768")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" vfio_iommu_type1,vfio_pci\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看核显是否为Kernel driver in use: vfio-pci，如果不为vfio-pci，则说明核显直通失败")]),s._v("\nlspci -v\n")])])]),a("h3",{attrs:{id:"win10"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#win10"}},[s._v("#")]),s._v(" WIN10")]),s._v(" "),a("h4",{attrs:{id:"upt模式直通核显"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#upt模式直通核显"}},[s._v("#")]),s._v(" UPT模式直通核显")]),s._v(" "),a("p",[s._v("适用于英特尔五代(Broadwell)及以后的CPU，直通的核显为第二显卡，虚拟vga为主显卡，因为虚拟显卡的存在有一定性能损失，推荐性能较好的机器使用。")]),s._v(" "),a("p",[s._v("BIOS 用默认 SeaBIOS，机器改为 q35")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改虚拟机配置文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/pve/qemu-server/100.conf\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 第二行")]),s._v("\nargs: -device vfio-pci,host"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("00:02.0,addr"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("0x18,x-vga"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("on,x-igd-opregion"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("on\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 倒数第二行")]),s._v("\nvga: std\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 有问题可以尝试")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"options vfio_iommu_type1 allow_unsafe_interrupts=1"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /etc/modprobe.d/iommu_unsafe_interrupts.conf\n")])])]),a("p",[s._v("UPT核显直通模式因为主显卡是虚拟显卡，很多程序默认先调用虚拟显卡而且改不了，所以会有一定性能损失。")]),s._v(" "),a("p",[s._v("如果设置双屏扩展或者复制显示，程序默认都不会调用核显；如果设置成仅在物理显示器显示，分辨率又调不了。")]),s._v(" "),a("p",[s._v("可行性比较高的是在设备管理器里面禁用虚拟显卡，双屏复制显示，这种情况分辨率可调，程序（包括Kodi）能默认调用核显，不过因为双屏的存在还是有性能损失。")]),s._v(" "),a("h4",{attrs:{id:"legacy模式直通核显"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#legacy模式直通核显"}},[s._v("#")]),s._v(" Legacy模式直通核显")]),s._v(" "),a("p",[s._v("适用于英特尔二代(Sandy Bridge)及以后的CPU，直通的核显为主显卡占用addr=0x02通道，所以不能添加虚拟显卡，这种模式实测成功率比较低，不过性能损失较小，推荐尝试。")]),s._v(" "),a("p",[s._v("BIOS 用默认 SeaBIOS，机器改为 i440fx")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改虚拟机配置文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/pve/qemu-server/100.conf\nargs: -device vfio-pci,host"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("00:02.0,addr"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("0x02\nvga: none\n")])])]),a("h2",{attrs:{id:"传感器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#传感器"}},[s._v("#")]),s._v(" 传感器")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cpu")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y lm-sensors\nsensors-detect\nsensors\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cpu")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 或者直接以度为单位显示")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" $"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" /sys/class/thermal/thermal_zone0/temp"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("/1000"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("°\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 实时观看")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("watch")]),s._v(" -n "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" CPU: $"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" /sys/class/thermal/thermal_zone0/temp"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("/1000"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("°\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# hdd")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y hddtemp\nhddtemp /dev/sda\n")])])]),a("h2",{attrs:{id:"install-virtual-machine"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#install-virtual-machine"}},[s._v("#")]),s._v(" install virtual machine")]),s._v(" "),a("p",[s._v("网卡型号：VirtIO")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 转换镜像")]),s._v("\nqemu-img convert -f raw -O qcow2 LEDE.img LEDE.qcow2\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 测试镜像")]),s._v("\nqemu-img check LEDE.qcow2\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 导入镜像")]),s._v("\nqm importdisk "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v(" LEDE.qcow2 local-lvm\n")])])]),a("ul",[a("li",[a("a",{attrs:{href:"https://drive.google.com/drive/folders/1dqNUrMf9n7i3y1aSh68U5Yf44WQ3KCuh",target:"_blank",rel:"noopener noreferrer"}},[s._v("eSir 固件下载"),a("OutboundLink")],1)])]),s._v(" "),a("p",[s._v("重置："),a("code",[s._v("firstboot")])]),s._v(" "),a("p",[s._v("默认IP：192.168.5.1")]),s._v(" "),a("h3",{attrs:{id:"dsm"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dsm"}},[s._v("#")]),s._v(" DSM")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://www.synology.cn/zh-cn/support/download/DS3617xs#utilities",target:"_blank",rel:"noopener noreferrer"}},[s._v("Synology Assistant"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://xpenology.com/forum/topic/7195-power-button-package/",target:"_blank",rel:"noopener noreferrer"}},[s._v("PVE 关机"),a("OutboundLink")],1)])]),s._v(" "),a("p",[s._v("网卡型号：E1000")]),s._v(" "),a("p",[s._v("引导硬盘(IMG 挂载)，资料盘(RDM直通硬盘)")]),s._v(" "),a("p",[s._v("qm 安装引导")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 转换镜像")]),s._v("\nqemu-img convert -f raw -O qcow2 DS3617_6.2-23739_1.03b.img DS3617_6.2-23739_1.03b.qcow2\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 测试镜像")]),s._v("\nqemu-img check DS3617_6.2-23739_1.03b.qcow2\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 导入镜像")]),s._v("\nqm importdisk "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("101")]),s._v(" DS3617_6.2-23739_1.03b.qcow2 local-lvm\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看硬盘")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" -l /dev/disk/by-id/\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 直通硬盘")]),s._v("\nqm "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("101")]),s._v(" --sata1 /dev/disk/by-id/ata-TOSHIBA_DT01ACA050_85C57TXLS\n")])])]),a("p",[s._v("img2kvm 安装引导")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" +x img2kvm\n./img2kvm synoboot.img "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("101")]),s._v(" vm-101-disk-1\n")])])]),a("ul",[a("li",[a("a",{attrs:{href:"https://www.synology.com/zh-cn/knowledgebase/DSM/help/DSM/StorageManager/storage_pool_what_is_raid",target:"_blank",rel:"noopener noreferrer"}},[s._v("选择 RAID 类型"),a("OutboundLink")],1)])]),s._v(" "),a("h3",{attrs:{id:"windows-10"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#windows-10"}},[s._v("#")]),s._v(" Windows 10")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://fedorapeople.org/groups/virt/virtio-win/direct-downloads/archive-virtio/virtio-win-0.1.141-1/",target:"_blank",rel:"noopener noreferrer"}},[s._v("virtio-win"),a("OutboundLink")],1)])]),s._v(" "),a("h2",{attrs:{id:"容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#容器"}},[s._v("#")]),s._v(" 容器")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://www.hostloc.com/thread-540788-1-1.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("LXC的模板Template制作教程"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://www.hostloc.com/thread-658147-1-1.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("Proxmox下LXC容器压缩(缩减)硬盘容量shrink disk"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);t.default=n.exports}}]);