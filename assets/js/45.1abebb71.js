(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{401:function(t,a,s){"use strict";s.r(a);var n=s(42),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"log4j"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#log4j"}},[t._v("#")]),t._v(" Log4j")]),t._v(" "),s("p",[t._v("IDEA log path")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("%HomePath%\\.IntelliJIdea2019.1\\system\\tomcat\\project\\logs\n")])])]),s("p",[t._v("log4j 的等级顺序（低到高）： DEBUG < INFO < WARN < ERROR < FATAL")]),t._v(" "),s("div",{staticClass:"language-properties extra-class"},[s("pre",{pre:!0,attrs:{class:"language-properties"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# %d{yyyy-MM-dd HH:mm:ss} %-5p %c{1}:%L - %m%n")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# %p %d{yyyy-MM-dd HH:mm:ss} - %m%n")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("log4j.rootLogger")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("DEBUG,Console")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Redirect log messages to console")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("log4j.appender.Console")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("org.apache.log4j.ConsoleAppender")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#log4j.appender.Console.Target=System.out")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("log4j.appender.Console.layout")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("org.apache.log4j.PatternLayout")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("log4j.appender.Console.layout.ConversionPattern")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("%d [%t] %-5p [%c] - %m%n")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("log4j.logger.org.apache")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("INFO")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Redirect log messages to a log file, support file rolling.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("log4j.appender.file")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("org.apache.log4j.RollingFileAppender")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("log4j.appender.file.File")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("${catalina.base}/logs/mes/log4j-application.log")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#log4j.appender.file.Threshold=WARN ")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("log4j.appender.file.MaxFileSize")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("5MB")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("log4j.appender.file.MaxBackupIndex")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("10")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("log4j.appender.file.layout")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("org.apache.log4j.PatternLayout")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("log4j.appender.file.layout.ConversionPattern")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("%d{yyyy-MM-dd HH:mm:ss} %-5p %c{1}:%L - %m%n")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("log4j.logger.org.springframework.jdbc.core")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("info")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("log4j.logger.org.springframework.jdbc.core.JdbcTemplate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("info")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("log4j.logger.org.springframework.jdbc.core.StatementCreatorUtils")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("info, file")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("log4j.logger.java.sql")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("info")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("log4j.logger.java.sql.Connection")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("info")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("log4j.logger.java.sql.Statement")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("info")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("log4j.logger.java.sql.PreparedStatement")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("info, fileout")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("log4j.logger.java.sql.ResultSet")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("info")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 每日")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("log4j.logger.wslogfile")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("INFO,wslogfile")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("log4j.appender.wslogfile")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("org.apache.log4j.DailyRollingFileAppender")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("log4j.appender.wslogfile.File")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("${catalina.base}/logs/wslogs/wslog.log")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("log4j.appender.wslogfile.DatePattern")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("yyyy-MM-dd'.log'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("log4j.appender.wslogfile.Encoding")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("UTF-8")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("log4j.appender.wslogfile.layout")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("org.apache.log4j.PatternLayout")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("log4j.appender.wslogfile.layout.ConversionPattern")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("%t %p %d{yyyy-MM-dd HH:mm:ss:SSS} - %m%n")]),t._v("\n")])])]),s("p",[t._v("Java")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//建立Logger的一个实例，命名为“com.foo”")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Logger")]),t._v(" logger "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Logger")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getLogger")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"com.foo"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('//"com.foo"是实例进行命名，也可以任意')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//设置logger的级别。通常不在程序中设置logger的级别。一般在配置文件中设置。")]),t._v("\nlogger"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setLevel")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Level")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("INFO"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Logger")]),t._v(" barlogger "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Logger")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getLogger")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"com.foo.Bar"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//下面这个请求可用，因为WARN >= INFO")]),t._v("\nlogger"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("warn")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Low fuel level."')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//下面这个请求不可用，因为DEBUG < INFO")]),t._v("\nlogger"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("debug")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Starting search for nearest gas station."')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//命名为“com.foo.bar”的实例barlogger会继承实例“com.foo”的级别。因此，下面这个请求可用，因为INFO >= INFO")]),t._v("\nbarlogger"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("info")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Located nearest gas station."')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//下面这个请求不可用，因为DEBUG < INFO")]),t._v("\nbarlogger"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("debug")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Exiting gas station search"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h2",{attrs:{id:"appenders"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#appenders"}},[t._v("#")]),t._v(" Appenders")]),t._v(" "),s("p",[t._v("禁用与使用日志请求只是Log4j其中的一个小小的地方，Log4j日志系统允许把日志输出到不同的地方，如控制台（Console）、文件（Files），根据天数或者文件大小产生新的文件，以流的形式发送到其它地方，异步记录日志等等。")]),t._v(" "),s("ol",[s("li",[t._v("定义：appender其实就是输出源(output destination, target, endpoint)。可以是终端、文件、图形界面、远程socket服务、JMS、邮件等。还支持日志的异步写入。")]),t._v(" "),s("li",[t._v("一个 logger 可以有一个或多个 appender，即日志可以同时记录到多个地方。通过"),s("span",{staticStyle:{color:"red"}},[t._v("logger.addAppender(Appender newAppender)")]),t._v(" 方法将 appender 添加到指定的 logger。")]),t._v(" "),s("li",[t._v("每一个发送给logger的合法（即没有被logger等级过滤掉）日志请求都会发送到该logger关联的每一个appenders和该logger的每一个父logger的appender。换一种说法就是logger会继承父 logger 的appender。可以通过设置 additivity=false 取消。")])])])}),[],!1,null,null,null);a.default=e.exports}}]);