(window.webpackJsonp=window.webpackJsonp||[]).push([[93],{449:function(t,a,s){"use strict";s.r(a);var e=s(42),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"n1"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#n1"}},[t._v("#")]),t._v(" N1")]),t._v(" "),s("h2",{attrs:{id:"系统还原"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#系统还原"}},[t._v("#")]),t._v(" 系统还原")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://www.right.com.cn/forum/thread-413863-1-1.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("N1刷完ARMBIAN想恢复EMMC超级简单线刷法，还可救砖"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://www.right.com.cn/forum/thread-362781-1-1.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("N1把ArmBian刷入EMMC后恢复电视盒子/安卓方法整理"),s("OutboundLink")],1)])]),t._v(" "),s("h3",{attrs:{id:"准备工作"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#准备工作"}},[t._v("#")]),t._v(" 准备工作")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("WEBPAD大的2.2线刷包 "),s("a",{attrs:{href:"https://www.right.com.cn/forum/thread-338759-1-1.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("传送门"),s("OutboundLink")],1)])]),t._v(" "),s("li",[s("p",[t._v("USB_Burning_Tool 刷机工具 "),s("a",{attrs:{href:"http://www.upantool.com/gujian/2018/12380.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("传送门"),s("OutboundLink")],1)])]),t._v(" "),s("li",[s("p",[t._v("USB对公线一条")])])]),t._v(" "),s("h3",{attrs:{id:"开始刷机"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#开始刷机"}},[t._v("#")]),t._v(" 开始刷机")]),t._v(" "),s("ol",[s("li",[t._v("先把USB对公线链接到电脑USB口与N1的第二个口（靠HDMI口），N1不要通电")]),t._v(" "),s("li",[t._v("打开USB_Burning_Tool，导入固件WEBPAD大的2.2的线刷包，验证通过后，出现开始字样")]),t._v(" "),s("li",[t._v("勾选"),s("span",{staticStyle:{color:"blue"}},[t._v("擦除FLASH")]),t._v("，不要勾选"),s("span",{staticStyle:{color:"red"}},[t._v("擦除bootloader")]),t._v("，USB_Burning_Tool点击开始运行刷机，"),s("span",{staticStyle:{color:"red"}},[t._v("3秒钟内速度让N1通电")])]),t._v(" "),s("li",[t._v("USB_Burning_Tool开始正常识别N1线刷模式，刷机开始")]),t._v(" "),s("li",[t._v("烧录完成后，拔电重启，N1恢复了原来的样子，可以正常ADB连接")])]),t._v(" "),s("h2",{attrs:{id:"刷入系统"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#刷入系统"}},[t._v("#")]),t._v(" 刷入系统")]),t._v(" "),s("p",[t._v("设置盒子从U盘启动")]),t._v(" "),s("div",{staticClass:"language-powershell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-powershell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\\adb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exe connect 192"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("168"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("10"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("186\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\\adb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exe shell reboot update\n")])])]),s("h3",{attrs:{id:"openwrt"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#openwrt"}},[t._v("#")]),t._v(" OpenWRT")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://www.right.com.cn/forum/thread-4043089-1-1.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("在线云编译斐讯N1的openwrt固件"),s("OutboundLink")],1)])]),t._v(" "),s("h4",{attrs:{id:"橙子-openwrt"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#橙子-openwrt"}},[t._v("#")]),t._v(" 橙子 OpenWrt")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://www.maxlicheng.com/embedded/36.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("斐讯N1 eMMC 刷入OpenWRT系统教程笔记"),s("OutboundLink")],1)])]),t._v(" "),s("p",[t._v("制作XQ7大神的Armbian系统 U盘镜像，并将Armbian写入到eMMC中")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("/boot/create-mbr-linux.sh\n./install.sh\n")])])]),s("p",[t._v("通过文件传输软件，将OpenWRT镜像文件上传到盒子root目录")]),t._v(" "),s("p",[t._v("完成后，创建一个emmc2文件夹")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" /emmc2\n")])])]),s("p",[t._v("将eMMC其中一个分区(Armbian所在的分区)挂载到新创建的emmc2文件夹")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mount")]),t._v(" /dev/mmcblk1p2 /emmc2\n")])])]),s("p",[t._v("删除Armbian的所有文件")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v(" -rf /emmc2/*\n")])])]),s("p",[t._v("挂载我们的OpenWRT镜像")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("losetup -P -f --show "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2019.05")]),t._v(".26-openwrt-on-phicomm-n1-bycheng.img\n")])])]),s("p",[t._v("挂载到指定文件夹")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mount")]),t._v(" /dev/loop0p2 /media\n")])])]),s("p",[t._v("将OpenWRT的所有文件拷贝到Armbian文件夹")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cp")]),t._v(" -R /media/* /emmc2\n")])])]),s("p",[t._v("卸载挂载")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("umount")]),t._v(" /media\nlosetup -d /dev/loop0\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("umount")]),t._v(" /emmc2\n")])])]),s("p",[t._v("重启盒子，先拔盒子电源，然后取下U盘，再插入电源")]),t._v(" "),s("h4",{attrs:{id:"gd772-openwrt"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#gd772-openwrt"}},[t._v("#")]),t._v(" gd772 OpenWrt")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://www.right.com.cn/forum/thread-3160780-1-1.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("自编N1盒子 Openwrt 固件,支持写入EMMC！"),s("OutboundLink")],1)])]),t._v(" "),s("h4",{attrs:{id:"flippy-openwrt"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#flippy-openwrt"}},[t._v("#")]),t._v(" flippy OpenWrt")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://www.right.com.cn/forum/thread-981406-1-1.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("N1_OP_U盘直刷包，及贝壳云_OP_线刷包"),s("OutboundLink")],1)])]),t._v(" "),s("p",[t._v("查看流控(rx/tx)："),s("code",[t._v("dmesg | grep dwmac")])]),t._v(" "),s("p",[t._v("写入 emmc："),s("code",[t._v("/root/inst-to-emmc.sh")])]),t._v(" "),s("p",[t._v("docker 数据目录："),s("code",[t._v("/mnt/mmcblk1p3/docker")])]),t._v(" "),s("p",[t._v("旁路由防火墙："),s("code",[t._v("iptables -t nat -I POSTROUTING -o eth0 -j MASQUERADE")])]),t._v(" "),s("h3",{attrs:{id:"armbian"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#armbian"}},[t._v("#")]),t._v(" Armbian")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://www.right.com.cn/forum/thread-788004-1-1.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("N1首个支持FullCone Nat的Armbian系统"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://yuerblog.cc/2019/10/23/%e6%96%90%e8%ae%afn1-%e5%ae%8c%e7%be%8e%e5%88%b7%e6%9c%baarmbian%e6%95%99%e7%a8%8b/",target:"_blank",rel:"noopener noreferrer"}},[t._v("斐讯N1 – 完美刷机Armbian教程"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://www.right.com.cn/forum/thread-739757-1-1.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("小狮子N1学习个人笔记"),s("OutboundLink")],1)])]),t._v(" "),s("p",[t._v("刷入系统")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("/boot/create-mbr-linux.sh\n/root/install.sh\n")])])]),s("ul",[s("li",[s("a",{attrs:{href:"https://yuerblog.cc/2019/11/06/%e6%96%90%e8%ae%afn1-armbian%e4%bf%9d%e6%8a%a4emmc-%e7%a6%81%e6%ad%a2-var-log%e6%97%a5%e5%bf%97/",target:"_blank",rel:"noopener noreferrer"}},[t._v("armbian保护emmc – 禁止/var/log日志"),s("OutboundLink")],1)])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" /etc/cron.d/armbian-truncate-logs\n*/15 * * * * root /usr/lib/armbian/armbian-truncate-logs\n")])])]),s("p",[t._v("在 /usr/lib/armbian/armbian-ramlog syncToDisk 函数 头部返回即可避免将日志 rsync 到 emmc")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function-name function"}},[t._v("syncToDisk")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# no sync to protect emmc")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n\n\tisSafe\n\n\t"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" -e "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),s("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[t._v("\\n")]),s("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[t._v("\\n")]),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("date")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v(")")])]),t._v(": Syncing logs from "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$LOG_TYPE")]),t._v(" to storage"),s("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[t._v("\\n")]),t._v('"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$LOG_OUTPUT")]),t._v("\n\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$USE_RSYNC")]),t._v('"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("then")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("rsync")]),t._v(" -aXWv --exclude armbian-ramlog.log --links "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$RAM_LOG")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$HDD_LOG")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("2")]),t._v(">")]),s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("&1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$LOG_OUTPUT")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cp")]),t._v(" -rfup "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$RAM_LOG")]),t._v(" -T "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$HDD_LOG")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("2")]),t._v(">")]),s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("&1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$LOG_OUTPUT")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fi")]),t._v("\n\n\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sync")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("armbian做了一个systemd服务：/lib/systemd/system/armbian-ramlog.service，它开机会创建zram盘，然后从emmc的/var/log.hdd中load数据到zram的/var/log路径下，完成开机初始化。")]),t._v(" "),s("p",[s("strong",[t._v("换源")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sed")]),t._v(" -i s@/httpredir.debian.org/@/mirrors.ustc.edu.cn/@g  /etc/apt/sources.list\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sed")]),t._v(" -i s@/security.debian.org/@/mirrors.ustc.edu.cn/debian-security/@g  /etc/apt/sources.list\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sed")]),t._v(" -i s@apt.armbian.com@mirrors.tuna.tsinghua.edu.cn/armbian@g  /etc/apt/sources.list.d/armbian.list\n")])])]),s("p",[s("strong",[t._v("openwrt")])]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://mlapp.cn/376.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("在Docker 中运行 OpenWrt 旁路网关"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://jkdigger.me/2019/12/02/n1-docker%E7%89%88openwrt%E6%9B%B4%E6%96%B0%E6%96%B9%E6%B3%95/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Docker版Openwrt更新方法"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://www.right.com.cn/forum/thread-958173-1-1.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Docker Openwrt r20.04.08"),s("OutboundLink")],1)])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ifconfig")]),t._v(" eth1 promisc  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 设置混杂模式")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ifconfig")]),t._v(" eth1 -promisc "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 取消混杂模式")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ip")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("link")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" eth0  promisc on  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 设置混杂模式")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ip")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("link")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" eth0  promisc off  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 取消混杂模式")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 拉取openwrt")]),t._v("\ndocker pull unifreq/openwrt-aarch64:r20.04.08\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建macvlan网络")]),t._v("\ndocker network create -d macvlan --subnet "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".11.0/24 --gateway "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".11.1 -o "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("parent")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("eth0 -o "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("macvlan_mode")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("bridge macnet\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看已创建网络")]),t._v("\ndocker network "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ")]),t._v("\ndocker run --name OpenWrt --restart always -d --network macnet --privileged unifreq/openwrt-aarch64:r20.04.08 /sbin/init\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 其他镜像")]),t._v("\ndocker pull kanshudj/n1-openwrtgateway:latest\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 修改管理地址")]),t._v("\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("vi")]),t._v(" /etc/config/network\noption ipaddr "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'192.168.2.3'")]),t._v("\noption netmask "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'255.255.255.0'")]),t._v("\noption gateway "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'192.168.2.1'")]),t._v("\noption dns "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'114.114.114.114 223.5.5.5 180.76.76.76 8.8.4.4'")]),t._v("\n$ /etc/init.d/network restart\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 永久开启混杂模式")]),t._v("\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("vi")]),t._v(" /etc/network/interfaces\nauto eth0\niface eth0 inet manual\nup "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ip")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("link")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" eth0 promisc on\nauto macvlan\niface macvlan inet static\n   address "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".12.104→修改成你需要的\n   netmask "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("255.255")]),t._v(".255.0\n   gateway "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".12.1→需改成你的主路由ip或192.168.12.5（旁路由的ip）\n   dns-nameservers "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".12.1→需改成你的主路由ip或12.5或再加1个公共dns比如114\n   pre-up "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ip")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("link")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" macvlan "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("link")]),t._v(" eth0 "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("type")]),t._v(" macvlan mode bridge\n   post-down "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ip")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("link")]),t._v(" del macvlan "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("link")]),t._v(" eth0 "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("type")]),t._v(" macvlan mode bridge\n$ systemctl restart networking\n")])])]),s("p",[s("strong",[t._v("固定IP")])]),t._v(" "),s("p",[t._v("给N1设置一个固定IP只需")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("armbian-config\nnetwork\neth0\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ip")]),t._v("\nstatic\n")])])]),s("p",[t._v("Edit /etc/network/interfaces and change from:")]),t._v(" "),s("div",{staticClass:"language-ini extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ini"}},[s("code",[t._v("iface eth0 inet dhcp\n")])])]),s("p",[t._v("to - for example:")]),t._v(" "),s("div",{staticClass:"language-ini extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ini"}},[s("code",[t._v("iface eth0 inet static\n \taddress 192.168.1.100\n\tnetmask 255.255.255.0\n\tgateway 192.168.1.1\n")])])]),s("div",{staticClass:"language-ini extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ini"}},[s("code",[t._v("auto lo\nauto ens33  #开机自动连接网络\niface lo inet loopback\nallow-hotplug ens33\niface ens33inet static   #static表示使用固定ip，dhcp表述使用动态ip\naddress 192.168.2.22  #设置ip地址\nnetmask 255.255.255.0  #设置子网掩码\ngateway 192.168.2.2    #设置网关\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#network 192.168.2.0")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#broadcast 192.168.2.255")]),t._v("\n\n\nauto lo\nauto eth0  #开机自动连接网络\niface lo inet loopback\nallow-hotplug eth0\niface eth0 inet static   #static表示使用固定ip，dhcp表述使用动态ip\naddress 192.168.1.233   #设置ip地址\nnetmask 255.255.255.0  #设置子网掩码\ngateway 192.168.1.1    #设置网关\n")])])])])}),[],!1,null,null,null);a.default=n.exports}}]);