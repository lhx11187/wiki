(window.webpackJsonp=window.webpackJsonp||[]).push([[91],{447:function(t,e,a){"use strict";a.r(e);var n=a(42),s=Object(n.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"jenkins"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jenkins"}},[t._v("#")]),t._v(" Jenkins")]),t._v(" "),a("h2",{attrs:{id:"install"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#install"}},[t._v("#")]),t._v(" Install")]),t._v(" "),a("h3",{attrs:{id:"war"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#war"}},[t._v("#")]),t._v(" WAR")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("wget")]),t._v(" http://mirrors.jenkins.io/war-stable/latest/jenkins.war\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("wget")]),t._v(" https://mirrors.tuna.tsinghua.edu.cn/jenkins/war-stable/latest/jenkins.war\njava -jar jenkins.war --ajp13Port"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("-1 --httpPort"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8081")]),t._v("\n")])])]),a("h3",{attrs:{id:"docker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker"}},[t._v("#")]),t._v(" Docker")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://www.jenkins.io/zh/doc/book/installing/#docker",target:"_blank",rel:"noopener noreferrer"}},[t._v("安装Jenkins"),a("OutboundLink")],1)])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("docker run "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  --rm "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  -u root "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  -d "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  -p "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8080")]),t._v(":8080 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  -v jenkins-data:/var/jenkins_home "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  -v /var/run/docker.sock:/var/run/docker.sock "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  jenkinsci/blueocean\n")])])]),a("h2",{attrs:{id:"pipeline"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pipeline"}},[t._v("#")]),t._v(" Pipeline")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://blog.csdn.net/diantun00/article/details/81075007",target:"_blank",rel:"noopener noreferrer"}},[t._v("玩转Jenkins Pipeline"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://www.cnblogs.com/stulzq/p/10115589.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Jenkins高级用法 - Jenkinsfile 介绍及实战经验"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/70355846",target:"_blank",rel:"noopener noreferrer"}},[t._v("jenkins之Blue Ocean"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://blog.csdn.net/hxpjava1/article/details/79739848",target:"_blank",rel:"noopener noreferrer"}},[t._v("pipeline 使用之语法详解"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://xuanwo.io/2019/08/30/jenkins-pipeline-intro/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Jenkins Pipeline 介绍"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("Jenkinsfile 示例")]),t._v(" "),a("p",[a("strong",[t._v("声明式")])]),t._v(" "),a("div",{staticClass:"language-Jenkinsfile extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("pipeline{\n    agent any\n    stages {\n        stage('Build') {\n            steps{\n                echo 'This is a build step' \n            }\n        }\n        stage('Test') {\n            steps{\n                echo 'This is a test step'  \n            }\n        }\n        stage('Deploy') {\n            steps{\n                echo 'This is a deploy step'    \n            }\n        }\n    }\n}\n")])])]),a("h2",{attrs:{id:"plugins"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#plugins"}},[t._v("#")]),t._v(" Plugins")]),t._v(" "),a("p",[a("strong",[t._v("美化")])]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://github.com/afonsof/jenkins-material-theme",target:"_blank",rel:"noopener noreferrer"}},[t._v("jenkins-material-theme"),a("OutboundLink")],1)])]),t._v(" "),a("p",[a("strong",[t._v("Maven Integration")])]),t._v(" "),a("p",[a("strong",[t._v("Publish Over SSH")])]),t._v(" "),a("p",[a("strong",[t._v("SVN Publisher plugin")])]),t._v(" "),a("p",[a("strong",[t._v("SSH Slaves plugin")])]),t._v(" "),a("p",[a("strong",[t._v("deploy plugin")])]),t._v(" "),a("h2",{attrs:{id:"cron"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cron"}},[t._v("#")]),t._v(" Cron")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("缩写")]),t._v(" "),a("th",[t._v("等价写法")]),t._v(" "),a("th",[t._v("描述")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("@daily 或 @midnight")]),t._v(" "),a("td",[t._v("0 0 * * *")]),t._v(" "),a("td",[t._v("每天午夜0点执行")])]),t._v(" "),a("tr",[a("td",[t._v("@hourly")]),t._v(" "),a("td",[t._v("0 * * * *")]),t._v(" "),a("td",[t._v("每个整点0分执行")])]),t._v(" "),a("tr",[a("td",[t._v("@monthly")]),t._v(" "),a("td",[t._v("0 0 1 * *")]),t._v(" "),a("td",[t._v("每月1号的午夜执行")])]),t._v(" "),a("tr",[a("td",[t._v("@weekly")]),t._v(" "),a("td",[t._v("0 0 * * 0")]),t._v(" "),a("td",[t._v("每周日午夜执行")])]),t._v(" "),a("tr",[a("td",[t._v("@yearly 或 @annually")]),t._v(" "),a("td",[t._v("0 0 1 1 *")]),t._v(" "),a("td",[t._v("每年1月1日的午夜执行")])])])]),t._v(" "),a("h2",{attrs:{id:"slave"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#slave"}},[t._v("#")]),t._v(" Slave")]),t._v(" "),a("h3",{attrs:{id:"jnlp"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jnlp"}},[t._v("#")]),t._v(" JNLP")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("进入 Manage Jenkins -> Configure Global Security -> Agents 勾选固定端口，填一个端口数字")])]),t._v(" "),a("li",[a("p",[t._v("进入 Manage Jenkins -> Manage Nodes -> New Node 勾选 Permanent Agent ，即设置为固定节点")])]),t._v(" "),a("li",[a("p",[t._v("配置页面 Remote root directory 远程根目录，指连接 slave节点后使用的目录，相关文件会存放于此")]),t._v(" "),a("p",[t._v('Launch method 选择 "Launch agent by connecting it to the master"')])])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("javaws -verbose slave-agent.jnlp\n")])])]),a("h3",{attrs:{id:"ssh"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ssh"}},[t._v("#")]),t._v(" SSH")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://juejin.im/post/6844903911774486542",target:"_blank",rel:"noopener noreferrer"}},[t._v("通过SSH方法添加Slave节点"),a("OutboundLink")],1)])]),t._v(" "),a("h2",{attrs:{id:"coding"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#coding"}},[t._v("#")]),t._v(" Coding")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://help.coding.net/docs/devops/ci/introduce.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Coding 持续集成（构建）介绍"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://blog.forecho.com/automatic-deployment.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("自动化部署"),a("OutboundLink")],1)])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 将节点注册至指定的项目节点池中")]),t._v("\ncci-agent init --pt "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${PROJECT_TOKEN}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 前台执行")]),t._v("\ncci-agent up\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 后台执行")]),t._v("\ncci-agent up -d\n")])])])])}),[],!1,null,null,null);e.default=s.exports}}]);