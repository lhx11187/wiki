(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{406:function(t,s,a){"use strict";a.r(s);var n=a(42),r=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"kvm"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#kvm"}},[t._v("#")]),t._v(" kvm")]),t._v(" "),a("p",[t._v("查看 CPU 是否支持虚拟化")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" /proc/cpuinfo "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("egrep")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vmx|svm'")]),t._v("\n")])])]),a("p",[t._v("查看是否加载 KVM 模块")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("lsmod "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("grep")]),t._v(" kvm\nll /dev/kvm\nmodprobe kvm\nmodprobe kvm-intel\n")])])]),a("p",[t._v("安装 KVM 相关软件包")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("yum "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" -y qemu-kvm qemu-img "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\nlibvirt libvirt-client libvirt-python "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\nvirt-manager virt-install virt-clone virt-image virt-viewer "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("virsh")]),t._v("\n")])])]),a("p",[t._v("启用 libvirt")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("systemctl start libvirtd\n")])])]),a("p",[t._v("安装虚拟机")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("virt-install "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n--name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("centos7 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n--memory"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512")]),t._v(",maxmemory"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1024")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n--vcpus"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(",maxvcpus"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n--os-type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("linux "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n--os-variant"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("rhel7 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n--location"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/tmp/CentOS-7-x86_64-DVD-1908.iso "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n--disk "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("path")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/opt/kvm_data/centos7.img,size"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n--bridge"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("br0 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n--graphics"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("none "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n--console"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("pty,target_type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("serial "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n--extra-args"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"console=tty0 console=ttyS0"')]),t._v("\n")])])])])}),[],!1,null,null,null);s.default=r.exports}}]);